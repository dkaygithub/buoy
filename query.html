<html>
    <head>
        <title>Query</title>
        <script>
            function makeQuery(e) {
                var params = {
                    "startTime": $("#startTime").val(),
                    "endTime": $("#endTime").val(),
                    "deviceId": $("#device").val(),
                    "latitude": $("#latitude").val(),
                    "longitude": $("#longitude").val(),
                };

                $.get("query.php", params, function(r) {
                    $results = $("#results");
                    $results.empty();
                    r = $.parseJSON(r);
                    $.each(r["readings"], function(ndx, result) {
                        var p = $("<p>", { class: "result" }).text(JSON.stringify(result));
                        $results.append(p);
                    });
                });
            }
        </script>
    </head>
    <body>
        <form id="criteria">

            <p><label for="startTime">Start time</label><br>
            <input type="text" id="startTime" name="startTime"></p>

            <p><label for="endTime">End time</label><br>
            <input type="text" id="endTime" name="endTime"></p>

            <p><label for="device">Device ID</label><br>
            <input type="text" id="device" name="device"></p>

            <p><label for="latitude">Latitude</label><br>
            <input type="text" id="latitude" name="latitude"></p>

            <p><label for="longitude">Longitude</label><br>
            <input type="text" id="longitude" name="longitude"></p>

        </form>
        <button onclick="makeQuery(event);">Submit query</button>

        <div id="results"></div>

        <script src="js/jquery-2.1.3.min.js"></script>
    </body>
</html>
